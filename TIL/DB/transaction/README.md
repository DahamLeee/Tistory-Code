# Transaction

## 1. Transaction란?  
데이터를 저장할 때 단순히 파일에 저장해도 되는데, 데이터베이스에 저장하는 이유는 무엇일까? 여러가지 이유가 있지만 가장 대표적인 이유는 바로 데이터베이스는 `트랜잭션이라는 개념을 지원`하기 때문이다.

트랜잭션을 이름 그대로 "거래"라는 뜻이다. 이것을 쉽게 풀어서 이야기하면, 데이터베이스에서 트랜잭션은 `하나의 거래를 안전하게 처리하도록 보장`해주는 것을 뜻한다.

모든 작업이 성공해서 데이터베이스에 정상 반영하는 것을 커밋(`Commit`), 작업 중 하나라도 실패해서 거래 이전으로 되돌리는 것을 롤백(`Rollback`)이라 한다.

<br>

## 2. ACID
트랜잭션은 다음과 같은 내용을 보장해야 한다.

- 원자성(Atomicity): 트랜잭션 내에서 실행한 작업들은 마치 `하나의 작업`인 것 처럼 `모두 성공하거나 모두 실패`해야 한다.

- 일관성(Consistency): 모든 트랜잭션은 `일관성 있는 데이터베이스 상태를 유지`해야 한다. 예를 들어 데이터베이스에서 정한 `무결성 제약 조건`을 항상 만족해야 한다.

- 격리성(Isolation): `동시에 실행되는 트랜잭션들이 서로에게 영향을 미치지 않도록 격리`한다. 예를 들어 동시에 같은 데이터를 수정하지 못하도록 해야 한다. 격리성은 `동시성과 관련된 성능 이슈`로 인해 트랜잭션 `격리 수준(Isolation Level)`을 선택할 수 있다.

- 지속성(Durability): 트랜잭션을 성공적으로 끝내면 `그 결과가 항상 기록`되어야 한다. **중간에 시스템에 문제가 발생해도 데이터베이스 로그 등을 사용해서 성공한 트랜잭션 내용을 복구해야 한다.**

<br>

## 3. 트랜잭션 격리 수준
트랜잭션은 원자성, 일관성, 지속성을 보장한다. 문제는 격리성인데 트랜잭션 간에 격리성을 완벽히 보장하려면 트랜잭션을 거의 순서대로 실행해야 한다. 이렇게 하면 동시 처리 성능이 매우 나빠진다. 이런 문제로 인해 ANSI 표준은 트랜잭션의 격리 수준을 4단계로 나누어 정의했다.

- READ UNCOMMITED (커밋되지 않은 읽기)
- READ COMMITED (커밋된 읽기)
- REPEATABLE READ (반복 가능한 읽기)
- SERIALIZBLE (직렬화 가능)

일반적으로 많이 사용하는 격리 수준은 READ COMMITED(커밋된 읽기)이다.
